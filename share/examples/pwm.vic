PIC P16F690;

Main {
    # arg1 - pwm frequency
    # arg2 - duty cycle ratio in percentage
    pwm_single 4kHz, 20%, CCP1;
    digital_output RC0;
    # pwm_halfbridge
    # pwm_fullbridge 'reverse','forward'
    Loop {
        write RC0, CCP1;
    }
}

Simulator {
    attach_led CCP1;
    attach_led RC0;
    stop_after 10s;
#    logfile "pwm.lxt";
#    log CCP1;
    scope CCP1, RC0;
    autorun;
}
